@{
    ViewBag.Title = "Index";
}
    
@using CultureEngine
@section styles
{
    @Styles.Render("~/Content/Home.css")
}

<div id="input" class="panel left">
    <div id="greeting">
        <h3>@LocalizationResx.GreetingHeader</h3>
        <p>@LocalizationResx.Greeting</p>
        <p>@LocalizationResx.GreetingFooter</p>
    </div>
    <label for="spec">@LocalizationResx.СhooseSpeciality</label>
        <select class="form-control" id="spec">
            <option value="noData">@LocalizationResx.PickSpeciality</option>
            <option value="pi">Програмная инженерия</option>
            <option value="ki">Компьютерная инженерия</option>
            <option value="ci">Системная инженерия</option>
        </select>
    <label for="quality">@LocalizationResx.ChooseUniversity</label>
        <select class="form-control" id="quality">
            <option value="noData">@LocalizationResx.PickQuality</option>
            <option value="1">@LocalizationResx.QualityGood</option>
            <option value="0.8">@LocalizationResx.QualityMiddle</option>
            <option value="0.6">@LocalizationResx.QualityLow</option>
        </select>
    <a href="#" id="commit" class="btn btn-default">@LocalizationResx.Calculate</a>
</div>
<div id="chart-container" class="panel" style="display: none">
    <input type="button" id="js-changeInput" class="btn btn-default" value="@LocalizationResx.SelectAnotherInput"/>
    <div class="chartWrapper right">
        <div id="payments-container"></div>
    </div>
    <div class="chartWrapper right">
        <div id="summary-container"></div>
    </div>
</div>





@section Scripts
{
    @Scripts.Render("~/Scripts/chartsScript.js")
    @Scripts.Render("~/Scripts/Highcharts-4.0.1/js/highcharts.js")
    @Scripts.Render("~/Scripts/Highcharts-4.0.1/js/modules/exporting.js")
    @Scripts.Render("~/Scripts/bootstrap.min.js")
    <script>
        $(function () {           

            var textStrings = {
                paymentsCaption: "@LocalizationResx.PaymentsCaption",
                summaryCaption: "@LocalizationResx.SummaryCaption",
                paymentsAxis: '@LocalizationResx.PaymentsGraphCaption',
                summaryAxis: '@LocalizationResx.SummaryGraphCaption',
                xAxisCaption: '@LocalizationResx.xChartAxisCaption',
                yAxisCaption: '@LocalizationResx.yChartAxisCaption',
                Profit: '@LocalizationResx.Profit',
                Year: '@LocalizationResx.Year',
                Costs: '@LocalizationResx.Costs',
                dotCaption: '@LocalizationResx.DotCaption',
                summarySalary: '@LocalizationResx.SummarySalary',
                summaryCosts: '@LocalizationResx.SummaryCosts',
                brinkCaprion:'@LocalizationResx.BrinkCaption'
            };

            var noData = [{
                name: textStrings.paymentsAxis,
                data: [],
                color: "red"
            },
                {
                    name: textStrings.summaryAxis,
                    data: [],
                    color: "green"
                }];

            var valueTypes = { costs: textStrings.Costs, year: textStrings.Year, profit: textStrings.Profit };

            var specialities = {
                "ki": {},
                "pi": {},
                "ci": {}
            };

            $("#js-changeInput").click(function () {
                $("#input").fadeToggle(500);
                $("#chart-container").fadeToggle(500);
            });

            $("#commit").on("click", function () {                
                var selectedSpec;
                if ($("#spec").val() != "noData" && $("#quality").val() != "noData") {
                    var names = ["ki", "pi", "ci"];
                    selectedSpec = JSON.parse(JSON.stringify(specialities[$("#spec").val()]));
                    for (var j = selectedSpec.length - 1; j >= 0; j--) {
                        for (var i = selectedSpec[j].data.length; i--;) {
                            selectedSpec[j].data[i][0] *= $("#quality").val();
                        }
                    }
                    console.log(selectedSpec.data);
                }
                else return;

                $("#input").fadeToggle(500);
                $("#chart-container").fadeToggle(500);

                 Chart.draw("#payments-container", [selectedSpec[0], selectedSpec[1]], textStrings.paymentsCaption, textStrings.xAxisCaption, textStrings.yAxisCaption, textStrings.dotCaption, valueTypes);
                 Chart.draw("#summary-container", [selectedSpec[2], selectedSpec[3]], textStrings.paymentsCaption, textStrings.xAxisCaption, textStrings.yAxisCaption, textStrings.brinkCaprion, valueTypes);
            });

            specialities["pi"] = [{
                name: textStrings.paymentsAxis,
                data: [[1300, 0], [1300, 1], [1300, 2], [1300, 3], [1300, 4], [1500, 5]],
                color: "#990033"// was red
            },
            {
                name: textStrings.summaryAxis,
                data: [[0, 0], [0, 1], [800, 2], [3000, 3], [5000, 4], [7000, 5]],
                color: "#0099CC"// was green
            },
            {
                name: textStrings.summaryCosts,
                data: [[1300, 0], [2600, 1], [3900, 2], [5200, 3], [6500, 4], [8000, 5]],
                color: "#E3402D"
            },
            {
                name: textStrings.summarySalary,
                data: [[0, 0], [0, 1], [9600, 2], [36000, 3], [60000, 4], [84000, 5]],
                color: "#187A0F"
            }]



            specialities["ci"] = [{
                name: textStrings.paymentsAxis,
                data: [[1300, 0], [1300, 1], [1300, 2], [1300, 3], [1300, 4], [1500, 5]],
                color: "#990033"// was red
            },
            {
                name: textStrings.summaryAxis,
                data: [[0, 0], [0, 1], [800, 2], [3000, 3], [5000, 4], [7000, 5]],
                color: "#0099CC"// was green
            },
            {
                name: textStrings.summaryCosts,
                data: [[1300, 0], [2600, 1], [3900, 2], [5200, 3], [6500, 4], [8000, 5]],
                color: "#E3402D"
            },
            {
                name: textStrings.summarySalary,
                data: [[0, 0], [0, 1], [9600, 2], [36000, 3], [60000, 4], [84000, 5]],
                color: "#187A0F"
            }]


            specialities["ki"] = [{
                name: textStrings.paymentsAxis,
                data: [[1200, 0], [1200, 1], [1200, 2], [1200, 3], [1200, 4], [1400, 5]],
                color: "#990033"
            },
            {
                name: textStrings.summaryAxis,
                data: [[0, 0], [0, 1], [1200, 2], [1700, 3], [2000, 4], [2500, 5]],
                color: "#0099CC"
            },
            {
                name: textStrings.summarySalary,
                data: [[0, 0], [0, 1], [1200, 2], [2900, 3], [4900, 4], [7400, 5]],
                color: "#E3402D"
            },
            {
                name: textStrings.summaryCosts,
                data: [[0, 0], [0, 1], [9600, 2], [36000, 3], [60000, 4], [84000, 5]],
                color: "#187A0F"
            }
            ]
        })
    </script>
}
