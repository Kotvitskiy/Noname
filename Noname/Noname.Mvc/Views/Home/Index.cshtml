@{
    ViewBag.Title = "Index";
}
    
@using CultureEngine

@Styles.Render("~/Content/Home.css")
<div class="chartWrapper left">
    <div id="payments-container"></div>
</div>


<div class="chartWrapper right">
    <div id="summary-container"></div>
</div>

<div class="form-wrapper">


 <select class="form-control" id="spec">
            <option selected disabled>@LocalizationResx.PickSpeciality</option>
          <option value="pi">Програмная инженерия</option>
          <option value="ki">Компьютерная инженерия</option>
          <option value="ci">Системная инженерия</option>      
        </select>  

     <select class="form-control" id="quality">
          <option selected disabled>@LocalizationResx.PickQuality</option>
          <option value="1">@LocalizationResx.QualityGood</option>
          <option value="0.8">@LocalizationResx.QualityMiddle</option>
          <option value="0.6">@LocalizationResx.QualityLow</option>     
        </select>  
   
        <a href="#" id="commit" class="btn btn-default">Расчитать</a>
</div>

@section Scripts
{
    <script src="~/Scripts/chartsScript.js"></script>
    <script src="~/Scripts/Highcharts-4.0.1/js/highcharts.js"></script>
    <script src="~/Scripts/Highcharts-4.0.1/js/modules/exporting.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script>

        function clone(destination, source) {
            for (var property in source) {
                if (typeof source[property] === "object" && source[property] !== null && destination[property]) {
                    clone(destination[property], source[property]);
                } else {
                    destination[property] = source[property];
                }
            }
        };

        $(function()
        {
            var specialities = {
                "ki": {},
                "pi": {},
                "ci": {}
            };
            
            $("#commit").on("click", function () {
                var names = ["ki", "pi", "ci"];
                var selectedSpec = JSON.parse(JSON.stringify(specialities[$("#spec").val()]));          
                for (var i = selectedSpec[1].data.length; i--;) {
                    selectedSpec[1].data[i][0] *= $("#quality").val();
                }

                for (var i = selectedSpec[0].data.length; i--;) {
                    selectedSpec[0].data[i][0] *= $("#quality").val();
                }
                console.log(selectedSpec.data);
                drawCharts("#payments-container", selectedSpec, "Уровень платы за обучение и урове  нь зарплаты спустя N лет после начала учебы");
                drawCharts("#summary-container", selectedSpec, "Cуммарные затраты на образование и суммарный заработок спустя N лет после начала учебы");
            });
            
            specialities["pi"] = [{
                name: 'Плата за обучение',
                data: [[1400, 1], [1500, 2], [1500, 3], [1500, 4], [1500, 5]],
                color: "red"
            },
            {
                name: 'Уровень зарплаты',
                data: [[0, 1], [800, 2], [3000, 3], [5000, 4], [7000, 5]],
                color: "green"
            }]



             specialities["ci"]  = [{
                 name: 'Плата за обучение',
                 data: [[1000, 1], [1000, 2], [1100, 3], [1000, 4], [1000, 5]],
                 color: "red"
             },
            {
                name: 'Уровень зарплаты',
                data: [[0, 1], [0, 2], [1200, 3], [2000, 4], [3000, 5]],
                color: "green"
            }]

             
             specialities["ki"] = [{
                 name: 'Плата за обучение',
                 data: [[1200, 1], [1200, 2], [1200, 3], [1400, 4], [1400, 5]],
                 color: "red"
             },
            {
                name: 'Уровень зарплаты',
                data: [[0, 1], [1200, 2], [1700, 3], [2000, 4], [2500, 5]],
                color: "green"
            }]



            drawCharts("#payments-container", specialities["pi"], "Уровень платы за обучение и уровень зарплаты спустя N лет после начала учебы");
            drawCharts("#summary-container", specialities["pi"], "Cуммарные затраты на образование и суммарный заработок спустя N лет после начала учебы");
        })
    </script>
}